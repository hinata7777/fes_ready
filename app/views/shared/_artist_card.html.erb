<div class="relative h-full">
  <%= link_to artist_path(artist),
              class: "flex h-full w-full flex-col items-center rounded-3xl border border-slate-200 bg-white p-4 pb-12 shadow-sm interactive-lift focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-400",
              data: { controller: "tap-feedback" } do %>
    <div class="aspect-square w-full overflow-hidden rounded-2xl border border-slate-200 bg-slate-50">
      <% if artist.image_url.present? %>
      <%= image_tag artist.image_url,
                    alt: artist.name,
                    class: "h-full w-full object-cover",
                    loading: "lazy" %>
      <% else %>
        <%= image_tag "artist_image.png",
                      alt: "",
                      class: "h-full w-full object-cover",
                      loading: "lazy" %>
      <% end %>
    </div>
    <p class="mt-3 w-full text-center text-sm font-semibold text-slate-800">
      <%= artist.name %>
    </p>
  <% end %>

  <% if user_signed_in? %>
    <div class="absolute left-3 bottom-3 z-10 flex h-9 w-9 items-center justify-center">
      <%= favorite_button_for(
            favorited: artist_favorited?(artist),
            toggle_url: artist_favorite_path(artist)
          ) %>
    </div>
  <% end %>

  <% if artist.spotify_artist_id.present? %>
    <div class="absolute bottom-3 right-3 z-10 flex h-9 w-9 items-center justify-center">
      <%= link_to "https://open.spotify.com/artist/#{artist.spotify_artist_id}",
                  target: "_blank",
                  rel: "noopener",
                  class: "inline-flex h-9 w-9 items-center justify-center rounded-full transition hover:opacity-80 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-400" do %>
        <span class="sr-only"><%= "#{artist.name} をSpotifyで開く" %></span>
        <%= image_tag "spotify_icon.png",
                      alt: "",
                      class: "h-6 w-6",
                      width: 24,
                      height: 24,
                      loading: "lazy" %>
      <% end %>
    </div>
  <% end %>
</div>
