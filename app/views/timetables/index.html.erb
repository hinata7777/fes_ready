<div class="min-h-screen px-4 py-6">
  <div class="mx-auto max-w-5xl space-y-6">
    <header class="space-y-4">
      <h1 class="text-2xl font-bold text-slate-900">タイムテーブルを見たいフェスを選択</h1>
      <p class="text-sm text-slate-600">公開中のタイムテーブルのみ表示しています。</p>
      <div class="flex justify-center">
        <div class="inline-flex rounded-xl bg-white p-1 shadow-md">
          <% preserved_query = request.query_parameters.except(:page, :status) %>
          <% @status_labels.each do |key, label| %>
            <% active = @status == key %>
            <% link_classes = [
              "rounded-lg px-4 py-2 text-sm font-semibold transition",
              active ? "bg-rose-500 text-white shadow-sm" : "text-slate-500 hover:text-rose-500"
            ].join(" ") %>
            <% path_options = preserved_query.merge(status: key) %>
            <%= link_to label,
                        timetables_path(path_options),
                        class: link_classes %>
          <% end %>
        </div>
      </div>
    </header>

    <%= render "shared/search_form",
               query: @q,
               url: timetables_path,
               placeholder: "フェス名を入力",
               status: @status %>

    <section class="grid gap-3 md:grid-cols-2 md:gap-4">
      <% if @festivals.any? %>
        <% @festivals.each do |festival| %>
          <div class="w-full">
            <%= render "shared/nav_stack_button",
                       label: festival.name,
                       url: "#" %>
          </div>
        <% end %>
      <% else %>
        <p class="rounded-xl bg-white px-4 py-12 text-center text-sm text-slate-500 shadow md:col-span-2">
          公開中のタイムテーブルはありません
        </p>
      <% end %>
    </section>
  </div>
  <%= render "shared/pagination", pagy: @pagy %>
</div>
