<div class="min-h-screen px-4 py-8">
  <div class="mx-auto w-full max-w-3xl space-y-8">
    <header class="space-y-2">
      <h1 class="text-3xl font-bold text-slate-900">ユーザー情報の設定</h1>
      <p class="text-sm text-slate-500">ニックネームを更新したい場合は、現在のパスワードを入力してください。</p>
    </header>

    <section class="rounded-3xl bg-white/90 p-6 shadow-2xl shadow-black/5 ring-1 ring-white/60 backdrop-blur space-y-6">
      <%= render "devise/shared/error_messages", resource: resource %>

      <%= form_with model: resource,
            url: registration_path(resource_name),
            method: :put,
            class: "space-y-6" do |f| %>
        <div class="space-y-2">
          <%= f.label :nickname, "ニックネーム", class: "block text-sm font-semibold text-slate-700" %>
          <%= f.text_field :nickname,
                class: "w-full rounded-xl border border-slate-200 px-4 py-3 text-base shadow-sm focus:border-slate-500 focus:outline-none focus:ring-2 focus:ring-slate-200",
                autofocus: true,
                autocomplete: "nickname" %>
        </div>

        <div class="space-y-2">
          <label class="block text-sm font-semibold text-slate-700">登録メールアドレス</label>
          <input type="text"
                 class="w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-base text-slate-500"
                 value="<%= resource.email %>"
                 readonly>
          <p class="text-xs text-slate-400">メールアドレスの変更は現在サポートされていません。</p>
        </div>

        <div class="space-y-2">
          <%= f.label :current_password, "パスワード確認", class: "block text-sm font-semibold text-slate-700" %>
          <%= f.password_field :current_password,
                class: "w-full rounded-xl border border-slate-200 px-4 py-3 text-base shadow-sm focus:border-slate-500 focus:outline-none focus:ring-2 focus:ring-slate-200",
                autocomplete: "current-password" %>
          <p class="text-xs text-slate-400">ニックネーム変更の確認に利用します。</p>
        </div>

        <div class="pt-6 text-center">
          <%= f.submit "変更を保存",
                class: "inline-flex items-center justify-center gap-2 rounded-full bg-slate-600 px-6 py-3 text-base font-semibold text-white shadow-sm interactive-lift hover:bg-slate-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-600",
                data: { controller: "tap-feedback" } %>
        </div>
      <% end %>

      <div class="space-y-2">
        <label class="block text-sm font-semibold text-slate-700">パスワード変更</label>
        <% if current_user&.provider.present? %>
          <p class="text-xs font-semibold text-indigo-600 leading-relaxed">
            Googleログインのみで利用している場合は、この操作は不要です。<br>
            メールアドレスとパスワードでもログインしたいときのみ、再設定を行ってください。
          </p>
        <% end %>
        <%= button_to "登録メールアドレスに変更URLを送信",
              user_password_path,
              method: :post,
              class: "inline-flex w-full items-center justify-center rounded-2xl bg-indigo-500 px-4 py-3 text-sm font-semibold text-white shadow-md interactive-lift hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500",
              data: { controller: "tap-feedback" } %>
        <p class="text-xs text-slate-400">登録メールアドレス宛にパスワード再設定用URLを送信します。</p>
      </div>
    </section>
  </div>
</div>
