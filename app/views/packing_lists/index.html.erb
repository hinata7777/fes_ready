<div class="min-h-screen px-4 pb-24 pt-6">
  <div class="mx-auto max-w-4xl space-y-6">
    <header class="space-y-3">
      <h1 class="text-2xl font-bold text-slate-900">持ち物リスト</h1>
      <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
        <p class="text-sm text-slate-600">フェスごとの持ち物をまとめてチェックできます。</p>
        <%= link_to "＋ マイ持ち物リストを新規作成",
                    new_packing_list_path,
                    class: "inline-flex items-center justify-center rounded-2xl bg-rose-500 px-4 py-2 text-sm font-bold text-white shadow-md interactive-lift hover:bg-rose-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-500",
                    data: { controller: "tap-feedback" } %>
      </div>
    </header>

    <section class="space-y-3">
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-bold text-slate-900">マイ持ち物リスト</h2>
        <span class="text-xs font-semibold text-slate-500"><%= @packing_lists.size %> 件</span>
      </div>

      <% if user_signed_in? %>
        <% if @packing_lists.any? %>
          <div class="grid gap-3 md:grid-cols-2 md:gap-4">
            <% @packing_lists.each do |list| %>
              <div class="w-full">
                <%= render "shared/nav_stack_button",
                           label: list.title,
                           url: packing_list_path(list) %>
              </div>
            <% end %>
          </div>
        <% else %>
          <p class="rounded-xl bg-white px-4 py-10 text-center text-sm text-slate-600 shadow-sm">
            まだ持ち物リストがありません。「新規作成」から登録してください。
          </p>
        <% end %>
      <% else %>
        <div class="rounded-2xl border border-amber-200 bg-amber-50 px-4 py-5 text-sm text-amber-800 shadow-sm space-y-3 text-center">
          <p class="font-bold">ログイン必須機能です</p>
          <p>リストの作成・閲覧にはログインが必要です。</p>
          <div class="flex justify-center">
            <%= link_to "ログインへ進む",
                        new_user_session_path,
                        class: "inline-flex items-center justify-center rounded-xl bg-rose-500 px-4 py-2 text-sm font-bold text-white shadow-sm interactive-lift hover:bg-rose-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-500",
                        data: { controller: "tap-feedback" } %>
          </div>
        </div>
      <% end %>
    </section>

    <% if @template_lists.any? %>
      <section class="space-y-3">
        <div class="flex items-center justify-between">
          <h2 class="text-sm font-semibold text-slate-800">テンプレートから作る</h2>
          <span class="text-xs text-slate-500">コピーして自分用に編集できます</span>
        </div>
        <div class="space-y-2">
          <% @template_lists.each do |template| %>
            <div class="rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm">
              <div class="flex items-start justify-between gap-3">
                <div class="min-w-0">
                  <p class="break-words text-sm font-bold text-slate-900"><%= template.title %></p>
                </div>
                <%= button_to "複製",
                              duplicate_from_template_packing_list_path(template),
                              method: :post,
                              class: "shrink-0 rounded-xl bg-indigo-500 px-3 py-1.5 text-xs font-bold text-white shadow-sm interactive-lift hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500",
                              data: { controller: "tap-feedback" } %>
              </div>
            </div>
          <% end %>
        </div>
      </section>
    <% end %>
  </div>
</div>
