<div class="rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm"
     data-nested-form-wrapper
     data-item-id="<%= f.object.item_id %>">
  <%= f.hidden_field :id if f.object.persisted? %>
  <%= f.hidden_field :_destroy, value: (f.object.respond_to?(:_destroy) ? f.object._destroy : false), data: { destroy_field: true } %>
  <%= f.hidden_field :item_id, value: f.object.item_id %>
  <%= f.hidden_field :position, value: f.object.position || 0, data: { position_field: true } %>

  <% if packing_list_item_new_record?(f.object) %>
    <%= f.fields_for :item do |item_fields| %>
      <%= item_fields.hidden_field :name %>
      <%= item_fields.hidden_field :description %>
      <%= item_fields.hidden_field :category %>
    <% end %>
  <% end %>

  <div class="flex items-start justify-between gap-3">
    <div class="min-w-0 space-y-1">
      <p class="break-words text-sm font-bold text-slate-900"><%= packing_list_item_name(f.object) %></p>
      <div class="pt-1">
        <%= f.text_field :note,
                         placeholder: "メモを追加 (任意)",
                         class: "mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-800 placeholder:text-slate-400 focus:border-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-200" %>
      </div>
    </div>
    <button type="button"
            class="shrink-0 rounded-lg bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400"
            data-action="click->packing-list-form#removeItem">
      削除
    </button>
  </div>
</div>
