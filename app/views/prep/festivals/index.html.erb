<div class="min-h-screen px-4 py-6">
  <div class="mx-auto max-w-5xl space-y-6">
    <header class="space-y-4">
      <h1 class="text-2xl font-bold text-slate-900">フェス予習一覧</h1>
      <p class="text-sm text-slate-600">フェスごとの予習ページをまとめています。<br>参加予定のフェスから曲をチェックしましょう。</p>
      <% unless user_signed_in? %>
        <%= render "shared/login_callout",
                   title: "ログインして予習するアーティストを保存しましょう",
                   description: "お気に入り登録で、気になるフェスをすぐに見返せます。",
                   cta_label: "ログイン" %>
      <% end %>
      <div class="flex justify-center">
        <%= render "shared/segmented_tabs",
              tabs: status_labels,
              active_tab_key: @status,
              url_builder: @tab_url_builder %>
      </div>
    </header>

    <%= render Shared::SearchFormComponent.new(
               query: @q,
               url: prep_festivals_path,
               placeholder: "フェス名を入力",
               status: @status,
               hidden_fields: @hidden_filter_fields
             ) %>

    <%= render "shared/festival_filters",
               form_url: prep_festivals_path,
               status: @status,
               search_query: @search_query,
               filter_params: @filter_params,
               festival_tags: @festival_tags,
               selected_tag_ids: @selected_tag_ids,
               reset_url: @reset_url %>

    <%= render "shared/festival_list",
               festivals: @festivals,
               empty_messages: [
                 "表示できるフェスがありません。",
                 "予習対象のフェスが見つかりませんでした。",
                 "開催時期やタグを変えて再検索してください。"
               ],
               link_url_proc: ->(festival) { prep_festival_path(festival) } %>
    <%= render "shared/pagination", pagy: @pagy %>
  </div>
</div>
